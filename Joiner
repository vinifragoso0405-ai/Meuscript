-- [[ KALIUX JOINER - REGRAS E URL CORRIGIDAS ]] --
local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")

-- CONFIGURA√á√ÉO VISUAL
local UI_NAME = "KALIUX JOINER"
local ACCENT_COLOR = Color3.fromRGB(255, 0, 0) -- Vermelho
local BG_COLOR = Color3.fromRGB(15, 15, 15)    -- Preto

-- URL CORRIGIDA (ADICIONADO O .json PARA AS REGRAS FUNCIONAREM)
local FIREBASE_URL = "https://meu-joiner-default-rtdb.firebaseio.com/.json"

-- VARI√ÅVEIS DE CONTROLE
local currentJobId = ""
local currentPlaceId = 15561560400 -- Definido o ID padr√£o do Brainrot caso o bot envie errado

-- CRIANDO A INTERFACE
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)

local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0, 280, 0, 120)
MainFrame.Position = UDim2.new(0.5, -140, 0.05, 0)
MainFrame.BackgroundColor3 = BG_COLOR
MainFrame.BorderSizePixel = 0
Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 10)
local MainStroke = Instance.new("UIStroke", MainFrame)
MainStroke.Color = ACCENT_COLOR
MainStroke.Thickness = 2

local Title = Instance.new("TextLabel", MainFrame)
Title.Size = UDim2.new(1, 0, 0, 30)
Title.Text = UI_NAME
Title.TextColor3 = ACCENT_COLOR
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18
Title.BackgroundTransparency = 1

local InfoLabel = Instance.new("TextLabel", MainFrame)
InfoLabel.Size = UDim2.new(1, 0, 0, 40)
InfoLabel.Position = UDim2.new(0, 0, 0.25, 0)
InfoLabel.Text = "üì° BUSCANDO DATABASE..."
InfoLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
InfoLabel.Font = Enum.Font.Gotham
InfoLabel.TextSize = 14
InfoLabel.BackgroundTransparency = 1

-- BOT√ÉO JOINER
local JoinButton = Instance.new("TextButton", MainFrame)
JoinButton.Size = UDim2.new(0, 200, 0, 35)
JoinButton.Position = UDim2.new(0.5, -100, 0.65, 0)
JoinButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
JoinButton.Text = "AGUARDANDO"
JoinButton.TextColor3 = Color3.fromRGB(100, 100, 100)
JoinButton.Font = Enum.Font.GothamBold
JoinButton.TextSize = 16
JoinButton.AutoButtonColor = true
local BtnCorner = Instance.new("UICorner", JoinButton)
BtnCorner.CornerRadius = UDim.new(0, 6)
local BtnStroke = Instance.new("UIStroke", JoinButton)
BtnStroke.Color = Color3.fromRGB(50, 50, 50)
BtnStroke.Thickness = 2

-- FUN√á√ÉO DE TELEPORTE
JoinButton.MouseButton1Click:Connect(function()
    if currentJobId ~= "" then
        JoinButton.Text = "TELEPORTANDO..."
        TeleportService:TeleportToPlaceInstance(currentPlaceId, currentJobId, Players.LocalPlayer)
    end
end)

-- LOOP DE MONITORAMENTO COM DEBUG
task.spawn(function()
    while task.wait(1.5) do
        local success, response = pcall(function()
            return HttpService:GetAsync(FIREBASE_URL)
        end)

        if success then
            local data = HttpService:JSONDecode(response)
            
            -- Verifica se o jobId existe e √© novo
            if data and data.jobId and data.jobId ~= "" and data.jobId ~= currentJobId then
                currentJobId = data.jobId
                
                -- Se o bot enviar um placeId bugado, mantemos o do jogo real
                if data.placeId and tostring(data.placeId):len() < 15 then
                    currentPlaceId = tonumber(data.placeId)
                end

                InfoLabel.Text = "VALOR: " .. (data.serverName or "Detected!")
                InfoLabel.TextColor3 = Color3.fromRGB(255, 255, 255)

                -- Ativa o bot√£o
                JoinButton.TextColor3 = Color3.fromRGB(255, 255, 255)
                JoinButton.BackgroundColor3 = Color3.fromRGB(180, 0, 0)
                BtnStroke.Color = Color3.fromRGB(255, 255, 255)
                JoinButton.Text = "ENTRAR AGORA"
            elseif not data or not data.jobId then
                InfoLabel.Text = "Database Vazia"
            end
        else
            InfoLabel.Text = "‚ùå Erro de Regras/URL"
            warn("Erro ao conectar no Firebase: " .. tostring(response))
        end
    end
end)

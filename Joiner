local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local FIREBASE_URL = "https://meu-joiner-default-rtdb.firebaseio.com/.json"

print("--- AUTO JOINER: AGUARDANDO DADOS ---")

while task.wait(1) do -- Checa a cada 1 segundo para ser rÃ¡pido
    pcall(function()
        local response = HttpService:GetAsync(FIREBASE_URL)
        local data = HttpService:JSONDecode(response)
        
        -- Note as letras minÃºsculas: 'jobId' e 'placeId'
        if data and data.ativo and data.jobId then
            print("ðŸš€ Servidor encontrado! Teleportando...")
            
            -- Limpa o status no Firebase para nÃ£o teleportar de novo pro mesmo
            HttpService:PostAsync(FIREBASE_URL, HttpService:JSONEncode({ativo = false}))
            
            TeleportService:TeleportToPlaceInstance(data.placeId, data.jobId, game.Players.LocalPlayer)
        end
    end)
end


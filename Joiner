-- [[ KALIUX HUB - SOLUÇÃO FINAL SEM BLOQUEIO ]] --
local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")

local URL = "https://meu-joiner-default-rtdb.firebaseio.com/.json"
local currentJob = ""

-- UI KALIUX HUB
local sg = Instance.new("ScreenGui", game.CoreGui)
local Main = Instance.new("Frame", sg)
Main.Size = UDim2.new(0, 260, 0, 150)
Main.Position = UDim2.new(0.5, -130, 0.2, 0)
Main.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
Instance.new("UICorner", Main)

local Title = Instance.new("TextLabel", Main)
Title.Size = UDim2.new(1, 0, 0, 30)
Title.Text = "KALIUX HUB"
Title.TextColor3 = Color3.fromRGB(255, 0, 0)
Title.Font = Enum.Font.GothamBold
Title.BackgroundTransparency = 1

local ServerInfo = Instance.new("TextLabel", Main)
ServerInfo.Size = UDim2.new(1, 0, 0, 30)
ServerInfo.Position = UDim2.new(0, 0, 0.25, 0)
ServerInfo.Text = "Buscando Servidores..."
ServerInfo.TextColor3 = Color3.fromRGB(255, 255, 255)
ServerInfo.BackgroundTransparency = 1

local btn = Instance.new("TextButton", Main)
btn.Size = UDim2.new(0, 200, 0, 40)
btn.Position = UDim2.new(0.5, -100, 0.5, 5)
btn.Text = "AGUARDANDO"
btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
btn.TextColor3 = Color3.fromRGB(255, 255, 255)
Instance.new("UICorner", btn)

local Discord = Instance.new("TextLabel", Main)
Discord.Size = UDim2.new(1, 0, 0, 20)
Discord.Position = UDim2.new(0, 0, 0.85, 0)
Discord.Text = "discord.gg/yDAcTrPvTD"
Discord.TextColor3 = Color3.fromRGB(114, 137, 218)
Discord.BackgroundTransparency = 1

-- TELEPORTE LIMPO (REQUER "VERIFY TELEPORTS" DESATIVADO NO DELTA)
btn.MouseButton1Click:Connect(function()
    if currentJob ~= "" then
        btn.Text = "JOINING..."
        local cleanID = tostring(currentJob):gsub("%s+", ""):gsub("\"", "")
        pcall(function()
            TeleportService:TeleportToPlaceInstance(18260270114, cleanID, Players.LocalPlayer)
        end)
    end
end)

-- LOOP FIREBASE
task.spawn(function()
    while task.wait(1.5) do
        local s, r = pcall(function() return game:HttpGet(URL) end)
        if s and r then
            local data = HttpService:JSONDecode(r)
            if data and data.jobId and data.jobId ~= currentJob then
                currentJob = data.jobId
                ServerInfo.Text = "Valor: " .. (data.serverName or "Detectado!")
                btn.Text = "JOIN"
                btn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
            end
        end
    end
end)
